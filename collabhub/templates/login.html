{% extends 'pagebase.html' %}

{% block pageTitle %}
Login
{% endblock pageTitle %}

{% block pageStyles %}
<link rel="stylesheet" href="{{ url_for('static',filename='cssStyles/login.css')}}" />
{% endblock pageStyles %}

{% block pageBody %}
<div class="form-container">
    <form method="post">
        {{ form.hidden_tag() }}
        <div class="heading">
            <h1>Log <span>In</span></h1>
        </div>
        {{ form.username(class="form-input")}}
        {{ form.username.label }}
        {{ form.password(class="form-input")}}
        {{ form.password.label }}
        <i class="fa-solid fa-eye" id="icon1"></i>
        {{ form.submit(class="form-submit")}}
        <p class="some-data">Don't have an account? <a href="{{url_for('register_page')}}">Register here</a></p>
    </form>
</div>
{% endblock pageBody %}

{% block pageScripts %}
<script>
    const inputs = document.querySelectorAll(".form-input");
    inputs.forEach((inp) => {
        inp.addEventListener("input", () => {
            if (inp.value !== "") {
                inp.nextElementSibling.classList.add("inactive");
            }
            else if (inp.value === "") {
                inp.nextElementSibling.classList.remove("inactive");
            }
        })
    })
    window.addEventListener("load", () => {
        inputs.forEach((inp) => {
            if (inp.value !== "") {
                inp.nextElementSibling.classList.add("inactive");
            }
            else if (inp.value === "") {
                inp.nextElementSibling.classList.remove("inactive");
            }
        })
    })
    //Handling password viewability
    let e1 = true;
    const eye1 = document.querySelector("#icon1");
    eye1.addEventListener("click", () => {
        if (e1) {
            inputs[1].setAttribute("type", "text");
            eye1.classList.remove("fa-eye");
            eye1.classList.add("fa-eye-slash");
            e1 = false
        }
        else {
            inputs[1].setAttribute("type", "password");
            eye1.classList.remove("fa-eye-slash");
            eye1.classList.add("fa-eye");
            e1 = true
        }
    })
</script>
{% endblock pageScripts %}